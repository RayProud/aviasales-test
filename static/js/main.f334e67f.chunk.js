(window.webpackJsonpaviasales=window.webpackJsonpaviasales||[]).push([[0],{26:function(e,t,r){e.exports=r.p+"static/media/logo.6e8d101a.svg"},28:function(e,t,r){e.exports=r(46)},33:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},46:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"changeMostFilter",function(){return v}),r.d(n,"changeLayoverFilter",function(){return d}),r.d(n,"turnAllLayoverFiltersOn",function(){return b}),r.d(n,"turnAllLayoverFiltersOff",function(){return g});var a={};r.r(a),r.d(a,"changeTheme",function(){return E}),r.d(a,"changeLocale",function(){return _}),r.d(a,"endSearch",function(){return j}),r.d(a,"hasError",function(){return k});var c={};r.r(c),r.d(c,"startSearching",function(){return N}),r.d(c,"ticketsResponseSuccess",function(){return w});var s=r(1),o=r.n(s),i=r(16),l=r.n(i),u=(r(33),r(10)),m=r(11),f=r(14),p=r(12),h=r(15),O=r(18),y=r(5),v=function(e){return{type:"CHANGE_MOST_FILTER",cheapest:e}},d=function(e){return{type:"CHANGE_LAYOVER_FILTER",layovers:e}},b=function(){return{type:"TURN_ALL_LAYOVER_FILTERS_ON"}},g=function(){return{type:"TURN_ALL_LAYOVER_FILTERS_OFF"}},E=function(e){return{type:"CHANGE_THEME",theme:e}},_=function(e){return{type:"CHANGE_LOCALE",locale:e}},j=function(){return{type:"END_SEARCH"}},k=function(){return{type:"HAS_ERROR"}},N=function(){return{type:"START_SEARCHING"}},w=function(e){return{type:"PUT_TICKETS",tickets:e}};function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var R=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(r,!0).forEach(function(t){Object(y.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},n,{},a,{},c),S=function(e,t,r,n,a){switch(e){case"one":return t;case"few":return r;case"many":return n;default:return a}},A=(r(39),function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onChangeAll=function(e){var t=r.props,n=t.onSwitchOn,a=t.onSwitchOff;return e.target.checked?n():a()},r.onChange=function(e){var t=r.props.onChange,n=e.target.checked,a=e.target.id;t(Object(y.a)({},a,n))},r.getLayoverTitle=function(e){var t=new Intl.PluralRules("ru-RU");switch(e){case"all":return"\u0412\u0441\u0435";case"0":return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";default:return"".concat(e," ").concat(S(t.select(Number(e)),"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"))}},r}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.filters,r=Object.values(t).every(function(e){return!0===e});return o.a.createElement("aside",{className:"layovers"},o.a.createElement("div",{className:"layovers-inner"},o.a.createElement("h2",{className:"layovers__heading"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),o.a.createElement("ul",{className:"layovers__list"},o.a.createElement("li",{className:"layovers__item"},o.a.createElement("input",{onChange:this.onChangeAll,checked:!!r,id:"stopsall",type:"checkbox",className:"layovers__item-checkbox"}),o.a.createElement("label",{htmlFor:"stopsall",className:"layovers__item-label"},this.getLayoverTitle("all"))),Object.keys(t).map(function(r,n){var a=r[r.length-1];return o.a.createElement("li",{className:"layovers__item",key:"".concat(r,"-").concat(n)},o.a.createElement("input",{onChange:e.onChange,checked:!!t[r],id:r,type:"checkbox",className:"layovers__item-checkbox"}),o.a.createElement("label",{htmlFor:r,className:"layovers__item-label"},e.getLayoverTitle(a)))}))))}}]),t}(o.a.PureComponent)),F=(r(40),r(25)),T=(r(41),function(e){var t=e.ticket,r=t.price,n=t.segments,a=t.carrier,c=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),s=new Intl.PluralRules("ru-RU");return o.a.createElement("li",{className:"ticket"},o.a.createElement("p",{className:"ticket__price"},c),o.a.createElement("img",{className:"ticket__logo",src:"//pics.avs.io/99/36/".concat(a,".png"),alt:"".concat(a," logo"),srcSet:"//pics.avs.io/99/36/".concat(a,"@2x.png 2x")}),n.map(function(e,t){var r=e.date,n=e.destination,a=e.origin,c=e.duration,i=e.stops,l=F.DateTime.fromISO(r),u=l.plus({minutes:c}),m=l.until(u),f=i.length>0,p=S(s.select(i.length),"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"),h=f?"".concat(i.length," ").concat(p):"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",O=f?i.map(function(e){return e}).join(", "):"\u041f\u0440\u044f\u043c\u043e\u0439";return o.a.createElement("dl",{key:t,className:"ticket__segment"},o.a.createElement("div",{className:"ticket__way"},o.a.createElement("dt",{className:"ticket__details-heading"},a," \u2013 ",n),o.a.createElement("dd",{className:"ticket__details-value"},m.toFormat("hh:mm"))),o.a.createElement("div",{className:"ticket__travel"},o.a.createElement("dt",{className:"ticket__details-heading"},"\u0412 \u043f\u0443\u0442\u0438"),o.a.createElement("dd",{className:"ticket__details-value"},m.toDuration(["hours","minutes"]).toFormat("hh\u0447 m\u043c"))),o.a.createElement("div",{className:"ticket__layouts"},o.a.createElement("dt",{className:"ticket__details-heading"},h),o.a.createElement("dd",{className:"ticket__details-value"},O)))}))}),P=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onChangeRadio=function(e){var t=e.target.value;r.props.onSelect("cheap"===t)},r}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tickets,r=e.cheapest;return o.a.createElement("main",{className:"tickets"},o.a.createElement("div",{className:"tickets__filter"},o.a.createElement("input",{onChange:this.onChangeRadio,className:"tickets__filter-radio",id:"most-cheap",type:"radio",name:"most",value:"cheap",checked:!!r}),o.a.createElement("label",{htmlFor:"most-cheap",className:"tickets__filter-label"},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0451\u0432\u044b\u0439"),o.a.createElement("input",{onChange:this.onChangeRadio,className:"tickets__filter-radio",id:"most-quick",type:"radio",name:"most",value:"quick",checked:!r}),o.a.createElement("label",{htmlFor:"most-quick",className:"tickets__filter-label"},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439")),o.a.createElement("ul",{className:"tickets__list"},t.map(function(e,t){return o.a.createElement(T,{key:"".concat(t,"-").concat(e.carrier,"-").concat(e.segments[0].destination,"-").concat(e.segments[0].date,"-").concat(e.segments[1].destination,"-").concat(e.segments[1].date),ticket:e})})))}}]),t}(o.a.PureComponent),x=(r(42),r(26)),C=r.n(x),D=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("img",{src:C.a,className:"header__logo",alt:"Aviasales logo"}))},I=(r(43),function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"plug"},"\u041c\u044b \u043d\u0430\u0448\u043b\u0438 \u043c\u043d\u043e\u0433\u043e \u0440\u0435\u0439\u0441\u043e\u0432, \u043d\u043e\xa0\u043d\u0438\xa0\u043e\u0434\u0438\u043d \u043d\u0435\xa0\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c",o.a.createElement("p",{className:"plug__additional-text"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u043f\u0435\u0440\u0435\u0434\u0451\u0442\u043e\u0432")))}),H=(r(44),function(){return o.a.createElement("div",{className:"error"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",o.a.createElement("p",{className:"error__additional-text"},"\u041c\u044b \u0443\u0436\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0435\u0451 \u043d\u0430\xa0\u0441\u0432\u043e\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443\xa0\u2014\xa0\u0438\u043d\u043e\u0433\u0434\u0430 \u044d\u0442\u043e \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 ;)"))}),M=R.startSearching,U=R.changeMostFilter,G=R.changeLayoverFilter,V=R.turnAllLayoverFiltersOn,Y=R.turnAllLayoverFiltersOff,q=function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.startSearching)()}},{key:"render",value:function(){var e=this.props,t=e.tickets,r=e.filters,n=r.cheapest,a=r.layovers,c=e.system,s=c.endSearch,i=c.hasError,l=e.changeMostFilter,u=e.changeLayoverFilter,m=e.turnAllLayoverFiltersOn,f=e.turnAllLayoverFiltersOff;return o.a.createElement("div",{className:"app"},o.a.createElement(D,null),i&&o.a.createElement(H,null),Object.keys(a).length>0&&o.a.createElement(A,{filters:a,onChange:u,onSwitchOn:m,onSwitchOff:f}),s&&t&&0===t.length&&o.a.createElement(I,null),t&&t.length>0&&o.a.createElement(P,{tickets:t,cheapest:n,onSelect:l}))}}]),t}(o.a.Component),B={startSearching:M,changeLayoverFilter:G,changeMostFilter:U,turnAllLayoverFiltersOn:V,turnAllLayoverFiltersOff:Y},J=Object(O.b)(function(e){return{tickets:e.tickets.tickets,filters:e.filters,system:e.system}},B)(q),K=r(6),W=r(19),z=r(27);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(r,!0).forEach(function(t){Object(y.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Z={theme:"white",locale:"ru-RU",endSearch:!1,hasError:!1};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(r,!0).forEach(function(t){Object(y.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var te={layovers:{},cheapest:!0};function re(e,t){return Object.keys(e).reduce(function(e,r){return e[r]=t,e},{})}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ae={};function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT_TICKETS":return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(r,!0).forEach(function(t){Object(y.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{tickets:t.tickets});default:return e}}var se=r(8),oe=r.n(se),ie=r(4),le=oe.a.mark(Ee),ue=oe.a.mark(_e),me=oe.a.mark(je),fe=oe.a.mark(ke),pe=R.ticketsResponseSuccess,he=R.changeLayoverFilter,Oe=R.endSearch,ye=R.hasError,ve=function(e){return e.filters},de=function(e){return e.system},be=new Worker("worker.js");function ge(){return Object(W.b)(function(e){be.onmessage=function(t){var r=t.data;e(r)};return function(){be.terminate()}})}function Ee(){var e,t,r,n,a,c;return oe.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(ie.b)(ge);case 2:e=s.sent;case 3:return s.next=6,Object(ie.e)(e);case 6:if(t=s.sent,r=t.tickets,n=t.layovers,a=t.stopSearch,c=t.error,!r){s.next=11;break}return s.next=11,Object(ie.c)(pe(r));case 11:if(!n){s.next=14;break}return s.next=14,Object(ie.c)(he(n));case 14:if(!a){s.next=17;break}return s.next=17,Object(ie.c)(Oe());case 17:if(!c){s.next=20;break}return s.next=20,Object(ie.c)(ye());case 20:s.next=3;break;case 22:case"end":return s.stop()}},le)}function _e(){var e,t,r;return oe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(ie.e)(["CHANGE_MOST_FILTER","CHANGE_LAYOVER_FILTER","TURN_ALL_LAYOVER_FILTERS_ON","TURN_ALL_LAYOVER_FILTERS_OFF"]);case 3:return n.next=5,Object(ie.d)(de);case 5:return e=n.sent,t=e.endSearch,n.next=9,Object(ie.d)(ve);case 9:r=n.sent,t&&be.postMessage({action:"sort",filters:r}),n.next=0;break;case 13:case"end":return n.stop()}},ue)}function je(){var e;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(ie.e)("START_SEARCHING");case 3:return t.next=5,Object(ie.d)(ve);case 5:e=t.sent,be.postMessage({action:"getTickets",filters:e}),t.next=0;break;case 9:case"end":return t.stop()}},me)}function ke(){return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.a)([je(),Ee(),_e()]);case 2:case"end":return e.stop()}},fe)}var Ne=Object(W.a)(),we=Object(K.combineReducers)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOCALE":return X({},e,{locale:t.locale});case"CHANGE_THEME":return X({},e,{theme:t.theme});case"END_SEARCH":return X({},e,{endSearch:!0});case"HAS_ERROR":return X({},e,{hasError:!0});default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LAYOVER_FILTER":return ee({},e,{layovers:ee({},e.layovers,{},t.layovers)});case"CHANGE_MOST_FILTER":return ee({},e,{cheapest:t.cheapest});case"TURN_ALL_LAYOVER_FILTERS_ON":return ee({},e,{layovers:re(e.layovers,!0)});case"TURN_ALL_LAYOVER_FILTERS_OFF":return ee({},e,{layovers:re(e.layovers,!1)});default:return e}},tickets:ce}),Le=Object(K.createStore)(we,Object(z.composeWithDevTools)(Object(K.applyMiddleware)(Ne)));Ne.run(ke);var Re=Le;l.a.render(o.a.createElement(O.a,{store:Re},o.a.createElement(J,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.f334e67f.chunk.js.map